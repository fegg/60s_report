var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,c=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&o(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&o(e,r,t[r]);return e},s=(e,a)=>t(e,r(a)),i=(e,t)=>{var r={};for(var o in e)n.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&a)for(var o of a(e))t.indexOf(o)<0&&l.call(e,o)&&(r[o]=e[o]);return r};import{R as d,c as m,r as p,u,a as f,b as h,i as v,d as g,T as E,l as y,e as C,P as N,S as j,C as b,f as k,g as _,A as x,D as A,L as w,h as I,j as D,k as P,m as F,n as R,N as S,o as T,p as M,B as O,q as $,s as B,t as q,v as z,w as L,x as K,y as V}from"./vendor.dfc9c737.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var W="_page_15ceg_1",H="_wrapper_15ceg_7",G="_header_15ceg_10",X="_timer_15ceg_30",J="_arrowRight_15ceg_40",Q="_total_15ceg_59",U="_num_15ceg_66",Y="_collapse_15ceg_69",Z="_warning_15ceg_72",ee="_placeholder_15ceg_75",te="_footer_15ceg_80",re="_button_15ceg_90",ae="_look_15ceg_98";var ne="_block_1beww_1",le="_label_1beww_6";function oe(e){const{children:t,label:r,extra:a,style:n={},className:l=""}=e;return d.createElement("div",{className:`${ne} ${l}`},r&&d.createElement("div",{className:le,style:n},d.createElement("span",null,r),a||""),"function"==typeof t?t(e):t)}var ce=function(e){const t={};return[function e(r){return r.map((r=>{let a=s(c({},r),{label:r.projectName,value:r.projectId});return r.children.length&&(a.children=e(r.children)),t[r.projectId]=r,a}))}(e.list||[]),t]}({list:[{parentId:"0",projectId:"98",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"会议",projectType:"1",remark:"各种会议（非项目/需求类会议），包括临时会议。请备注：为哪个部门 做什么事情；如果是项目会议，请把工时填在项目里！",isRequiredComment:"1",isForceNotice:"1",notice:"各种会议（非项目/需求类会议），包括临时会议。请备注：为哪个部门 做什么事情；如果是项目会议，请把工时填在项目里！",hasChildrenProject:!1,createdAt:"1637072829",updatedAt:"1639032130",children:[]},{parentId:"0",projectId:"104",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"其他",projectType:"1",remark:"不建议选其他；请备注：为哪个部门 做什么事情；",isRequiredComment:"1",isForceNotice:"1",notice:"不建议选其他；请备注：为哪个部门 做什么事情；",hasChildrenProject:!1,createdAt:"1637072829",updatedAt:"1639032130",children:[]},{parentId:"0",projectId:"105",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"管理工作",projectType:"1",remark:"",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637072829",updatedAt:"1639032130",children:[]},{parentId:"0",projectId:"122",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"面试",projectType:"1",remark:"为部门人才招聘面试",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637072829",updatedAt:"1639032130",children:[]},{parentId:"0",projectId:"135",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"线上问题",projectType:"1",remark:"",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637166203",updatedAt:"1639032130",children:[{parentId:"135",projectId:"99",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"线上问题处理",projectType:"1",remark:"解决/验证线上问题/故障，解答客户问题",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637072829",updatedAt:"1639032130",children:[]},{parentId:"135",projectId:"136",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"APP安全修复",projectType:"1",remark:"解决/验证线上问题/故障，解答客户问题",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637166498",updatedAt:"1639032130",children:[]}]},{parentId:"0",projectId:"167",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"绩效规则",projectType:"1",remark:"和收入确认，绩效划分相关的体系能力建设。",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637167743",updatedAt:"1639032130",children:[]},{parentId:"0",projectId:"194",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"IT网络/桌面支持",projectType:"1",remark:"公司网络维护，IT支持，IT叫修，账号管理等IT活动",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637415376",updatedAt:"1639032130",children:[]},{parentId:"0",projectId:"195",userDeptCode:"001-00A",costDeptCode:"001-00A",costDeptName:"",projectName:"工程运维",projectType:"1",remark:"云，服务器，数据库，线下线上环境等维护",isRequiredComment:"2",isForceNotice:"2",notice:"",hasChildrenProject:!1,createdAt:"1637415430",updatedAt:"1639032130",children:[]}],total:"0"});const[se,ie]=ce,de=d.createContext({recentOptions:{},timeScope:"",total:0}),me=d.createContext({works:se,projects:[],worksMap:ie,projectsMap:{},getProjects:()=>{},searchParams:{projectName:""}});function pe(e,t){const r=c({},t.props);e.className&&(r.className=m(t.props.className,e.className)),e.style&&(r.style=c(c({},r.style),e.style)),void 0!==e.tabIndex&&(r.tabIndex=e.tabIndex);for(const a in e)e.hasOwnProperty(a)&&(a.startsWith("data-")||a.startsWith("aria-"))&&(r[a]=e[a]);return d.cloneElement(t,r)}const ue=({points:e,max:t,min:r,upperBound:a,lowerBound:n})=>{const l=t-r,o=e.map((e=>{const t={left:Math.abs(e-r)/l*100+"%"},o=m({"adm-slider-tick":!0,"adm-slider-tick-active":e<=a&&e>=n});return d.createElement("span",{className:o,style:t,key:e})}));return d.createElement("div",{className:"adm-slider-ticks"},o)},fe=({marks:e,upperBound:t,lowerBound:r,max:a,min:n})=>{const l=Object.keys(e),o=a-n,c=l.map(parseFloat).sort(((e,t)=>e-t)).filter((e=>e>=n&&e<=a)).map((a=>{const l=e[a];if(!l&&0!==l)return null;const c=m({"adm-slider-mark-text":!0,"adm-slider-mark-text-active":a<=t&&a>=r}),s={left:(a-n)/o*100+"%"};return d.createElement("span",{className:c,style:s,key:a},l)}));return d.createElement("div",{className:"adm-slider-mark"},c)},he=e=>{const{value:t,min:r,max:a,disabled:n,onDrag:l}=e,o=p.exports.useRef(t),s=u((c=>{var s;if(n)return;c.first&&(o.current=t);const i=c.xy[0]-c.initial[0],d=null==(s=e.trackRef.current)?void 0:s.offsetWidth;if(!d)return;const m=i/Math.ceil(d)*(a-r);l(o.current+m,c.first,c.last)}),{axis:"x",pointer:{touch:!0}});return d.createElement("div",c({className:"adm-slider-thumb-container",style:{left:(t-r)/(a-r)*100+"%",right:"auto"}},s()),d.createElement("div",{className:"adm-slider-thumb"}),d.createElement("div",{className:"adm-slider-value"},+t,d.createElement("div",{className:"adm-slider-down"})))};function ve(...e){function t(e,t){return v(t)?e:t}let r=f({},e[0]);for(let a=1;a<e.length;a++)r=h(r,e[a],t);return r}function ge(e){const{value:t,defaultValue:r,onChange:a}=e,n=g(),l=p.exports.useRef(void 0!==t?t:r);void 0!==t&&(l.current=t);const o=p.exports.useCallback((e=>{void 0===t&&(l.current=e,n()),null==a||a(e)}),[t,n,a]);return[l.current,o]}const Ee={min:0,max:100,step:1,ticks:!1,range:!1,disabled:!1},ye=e=>{var t;const r=ve(Ee,e),{min:a,max:n,disabled:l,marks:o,ticks:c,step:s}=r;function i(e){return e.sort(((e,t)=>e-t))}function u(e){return r.range?e:e[1]}function f(e){var t;null==(t=r.onAfterChange)||t.call(r,u(e))}const[h,v]=ge({value:r.value,defaultValue:null!=(t=r.defaultValue)?t:r.range?[a,a]:a,onChange:r.onChange}),g=i((E=h,r.range?E:[r.min,E]));var E;function y(e){const t=i(e),r=g;t[0]===r[0]&&t[1]===r[1]||v(u(t))}const C=p.exports.useRef(null),N=100*(g[1]-g[0])/(n-a)+"%",j=100*(g[0]-a)/(n-a)+"%",b=p.exports.useMemo((()=>{if(o)return Object.keys(o).map(parseFloat).sort(((e,t)=>e-t));{const e=[];for(let t=a;t<=n;t+=s)e.push(t);return e}}),[o,c,s,a,n]);function k(e){const t=e<a?a:e>n?n:e;let r=a;if(b.length)l=t,r=b.reduce(((e,t)=>Math.abs(e-l)<Math.abs(t-l)?e:t));else{const e=100/((n-a)/s);r=Math.round(t/e)*e*(n-a)*.01+a}var l;return r}const _=p.exports.useRef(0),x=e=>{if(_.current>0)return;if(e.stopPropagation(),l)return;const t=C.current;if(!t)return;const o=t.getBoundingClientRect().left,c=k((e.clientX-o)/Math.ceil(t.offsetWidth)*(n-a)+a);let s;s=r.range?Math.abs(c-g[0])>Math.abs(c-g[1])?[g[0],c]:[c,g[1]]:[r.min,c],y(s),f(s)},A=p.exports.useRef(),w=e=>d.createElement(he,{key:e,value:g[e],min:a,max:n,disabled:l,trackRef:C,onDrag:(t,r,a)=>{r&&(_.current+=1,A.current=g);const n=k(t),l=A.current;if(!l)return;const o=[...l];o[e]=n,y(o),a&&(f(o),window.setTimeout((()=>{_.current-=1}),100))}});return pe(r,d.createElement("div",{className:m("adm-slider",{"adm-slider-disabled":l})},d.createElement("div",{className:"adm-slider-track-container",onClick:x},d.createElement("div",{className:"adm-slider-track",onClick:x,ref:C},d.createElement("div",{className:"adm-slider-fill",style:{width:N,left:j}}),r.ticks&&d.createElement(ue,{points:b,min:a,max:n,lowerBound:g[0],upperBound:g[1]}),r.range&&w(0),w(1))),o&&d.createElement(fe,{min:a,max:n,marks:o,lowerBound:g[0],upperBound:g[1]})))};var Ce="_sliderWrapper_bmjh4_1";const Ne=Array.from({length:21},((e,t)=>5*t)).reduce(((e,t)=>(e[t]=0===t||100===t?t:"",e)),{});function je({onChange:e,onAfterChange:t,value:r}){return d.createElement("div",{className:Ce},d.createElement(ye,{value:r,onChange:e,onAfterChange:t,marks:Ne}))}var be={ellipsis:"_ellipsis_1tt2b_1",unselect:"_unselect_1tt2b_7",projectPopup:"_projectPopup_1tt2b_14",projectHeader:"_projectHeader_1tt2b_20",projectPopupClose:"_projectPopupClose_1tt2b_30",projectSearch:"_projectSearch_1tt2b_39",checkList:"_checkList_1tt2b_40"};const ke={work_tree:"workItems",project_tree:"projectItems"};const _e=e=>{d.useEffect((()=>{const e=document.querySelectorAll(".wrap-tree-select .adm-tree-select-column");2===e.length&&(e[0].style.width="40%",e[1].style.width="60%")}),[]);const{columns:t=2,cacheKey:r="work_tree"}=e,{recentOptions:a}=p.exports.useContext(de),n=e.options.map((e=>{const t={label:e.label,value:e.value};if(e.children.length){let r=function(e){return"string"==typeof e?d.createElement("span",{dangerouslySetInnerHTML:{__html:e}}):e};return s(c({},t),{children:e.children.map((e=>({label:r(e.label),value:e.value})))})}return+e.value<0?t:s(c({},t),{children:[s(c({},t),{value:`|${t.value}`})]})})),l={label:"最近选择",value:"-1",children:a[ke[r]]};n.unshift(l);const o=e.defaultValue;return e.options.map((e=>e.value)).includes(o[1])?(o[0]=o[1],o[1]=`|${o[1]}`):o[1]&&(o[0]=function(e,t){const r=e.find((e=>e.children.map((e=>e.value)).includes(t)));return null==r?void 0:r.value}(e.options,o[1])),p.exports.useEffect((()=>{var e;null==(e=document.querySelector(".adm-tree-select-item-active"))||e.scrollIntoView()}),[o]),d.createElement(E,{options:n,defaultValue:o,className:"wrap-tree-select",onChange:(r,a)=>{if(r.length===t){const[,t]=a.options;t.value=t.value.replace(/\||~|!/,""),e.onChange([r[0],t.value])}}})};function xe(e){const{projects:t,projectsMap:r,getProjects:a,searchParams:n}=p.exports.useContext(me),{timeScope:l}=p.exports.useContext(de),[o,m]=p.exports.useState(!1),[u,f]=p.exports.useState([]),{data:h={},onChange:v}=e,g=y.exports.debounce(a,800),E=p.exports.useCallback((e=>{let t={page:1,pageSize:999,searchDate:l};e&&(t.projectName=e),g(t)}),[g,l]);return p.exports.useEffect((()=>{var e;let a=[...t],l=[],o=[];function m(e){return"string"==typeof e?d.createElement("span",{dangerouslySetInnerHTML:{__html:e}}):e}Object.values(r).forEach((e=>{const t=e,{children:r=[]}=t,a=i(t,["children"]);1==+e.projectRankType&&l.push(s(c({},a),{value:`~${a.value}`})),2==+e.projectRankType&&o.push(s(c({},a),{value:`~${a.value}`}))})),a=a.map((e=>{const t=m(e.label);if(e.children.length){e.children=e.children.map((e=>{const t=m(e.label);return s(c({},e),{label:t})}));return s(c({},e),{label:t,value:`!${e.value}`,children:[s(c({},e),{children:[]}),...e.children]})}return s(c({},e),{label:t})})),n.projectName&&t.length&&(null==(e=document.querySelectorAll(".adm-tree-select-item")[3])||e.click()),f([{label:"公司级项目",value:"-2",children:l},{label:"部门级项目",value:"-3",children:o},...a])}),[t,r,n.projectName]),p.exports.useEffect((()=>{!h.projectId&&m(!0)}),[h]),d.createElement(d.Fragment,null,d.createElement("span",{className:be.ellipsis,onClick:()=>{m(!0)}},h.projectName||d.createElement("span",{className:be.unselect},"请选择"),d.createElement(C,null)),d.createElement(N,{visible:o,onMaskClick:()=>{m(!1)},className:be.projectPopup,bodyStyle:{borderRadius:"20px 20px 0 0"}},d.createElement("div",{className:be.projectHeader},"项目名称",d.createElement("img",{onClick:()=>m(!1),className:be.projectPopupClose,src:"https://pub-med-post.medlinker.com/_/prod/developer-panel/1462974496569823003.png"})),d.createElement(j,{onChange:E,style:{backgroundColor:"#ffffff",width:"100%",padding:"10px 20px"},placeholder:"请输入项目名称过滤",defaultValue:null==n?void 0:n.projectName}),d.createElement("div",{className:be.checkList,style:{height:"80vh"}},d.createElement(_e,{cacheKey:"project_tree",options:null!=u?u:t,defaultValue:["-1",h.projectId],onChange:e=>{const t=r[e[1].replace("~","")];let a={projectType:t.projectType,projectName:t.label,projectId:t.value};t.costDeptCode&&(a.costDeptCode=t.costDeptCode),a.projectId!==h.projectId&&(a.remark=""),v(a),m(!1)}}))))}function Ae(e){const{data:t={},onChange:r}=e,[a,n]=p.exports.useState(!1),{works:l,worksMap:o}=p.exports.useContext(me);let c=t.projectName||d.createElement("span",{className:be.unselect},"请选择");return p.exports.useEffect((()=>{!t.projectId&&n(!0)}),[t]),d.createElement(d.Fragment,null,d.createElement("span",{className:be.ellipsis,onClick:()=>{n(!0)}},c,d.createElement(C,null)),d.createElement(N,{getContainer:()=>document.getElementById("simulator-popup"),visible:a,onMaskClick:()=>{n(!1)},className:be.projectPopup,bodyStyle:{borderRadius:"20px 20px 0 0"}},d.createElement("div",{className:be.projectHeader},"工作事项",d.createElement("img",{onClick:()=>n(!1),className:be.projectPopupClose,src:"https://pub-med-post.medlinker.com/_/prod/developer-panel/1462974496569823003.png"})),d.createElement("div",{className:be.checkList,style:{height:"80vh"}},d.createElement(_e,{options:l,defaultValue:["-1",t.projectId],onChange:e=>{const a=o[e[1]];let l={projectName:a.projectName,projectId:a.projectId,isRequiredComment:+a.isRequiredComment,isForceNotice:+a.isForceNotice,notice:a.notice};a.costDeptCode&&(l.costDeptCode=a.costDeptCode),l.projectId!==t.projectId&&(l.remark=""),r(l),n(!1)}}))))}var we="_remark_1kzp3_1",Ie="_title_1kzp3_1",De="_tip_1kzp3_1",Pe="_card_1kzp3_7",Fe="_header_1kzp3_12",Re="_remove_1kzp3_20";function Se(e){const{data:t={},onChange:r,onRemove:a,type:n}=e,{total:l}=p.exports.useContext(de);function o(e,a=!1){return l+(e-+t.cost)>100&&(e=100-l+ +t.cost,a&&_.show({content:"工作精力已达到100%"})),r({cost:e})}return d.createElement(d.Fragment,null,d.createElement("div",{className:Pe},d.createElement("div",{className:Fe},"project"===n&&d.createElement(xe,c({},e)),"item"===n&&d.createElement(Ae,c({},e)),d.createElement("div",{className:Re,onClick:a},d.createElement(b,null))),d.createElement(je,{onChange:e=>o(e),onAfterChange:e=>o(e,!0),value:t.cost}),d.createElement("div",{className:we},d.createElement("div",{className:Ie},1===t.isRequiredComment&&d.createElement("span",null,"*"),"备注："),d.createElement(k,{value:t.remark,onChange:e=>r({remark:e}),placeholder:""+(1===t.isRequiredComment?"请输入备注":"（选填）"),rows:1,autoSize:{minRows:1,maxRows:5}})),1===t.isRequiredComment&&!t.remark&&d.createElement("div",{className:De},d.createElement("span",null,"*"),t.notice)))}function Te(e){const{deptCode:t,item:r,onChange:a,projectType:n,title:l,type:o}=e;let s=[],i=[];const[m,p]=ce;return"item"===o&&r[`${o}s`].forEach((e=>{+e.projectType===n?s.push(e):i.push(e)})),d.createElement(me.Provider,{value:{getProjects:()=>{},projects:[],works:m,worksMap:p,projectsMap:{},searchParams:{}}},d.createElement(oe,{label:l,className:s.length?be.block:"",extra:d.createElement("div",{onClick:()=>{let e={time:+new Date,cost:0};if("item"===o){if(e.projectType=n,s[0]&&!s[0].projectId)return void _.show({content:"请先完善再新增"})}else if(s[0]&&!s[0].projectId)return void _.show({content:"请先完善再新增"});r[`${o}s`].unshift(e),a(r)}},d.createElement(x,{style:{color:"#1677ff"}}))},!!s.length&&s.map(((e,l)=>d.createElement(Se,{type:o,key:`${o}_${l}_${e.projectId}_${e.time}_${r[`${o}Type`]}`,data:e,projectType:n,deptCode:t,onChange:d=>{const m=s.filter((e=>e.projectId===d.projectId));if(d.projectId&&m.length){if(d.projectId===e.projectId)return;return _.show({content:"当前工作已添加请勿重复添加"}),void console.log(e)}1===d.isForceNotice&&A.alert({content:d.notice||"请填写备注",closeOnMaskClick:!1}),e=c(c({costDeptCode:t},e),d),"item"===o&&(e.projectType=n),s[l]=e,r[`${o}s`]=[...s,...i],a(r)},onRemove:()=>{s.splice(l,1),r[`${o}s`]=[...s,...i],a(r)}})))))}function Me(e){return d.createElement("div",null,d.createElement(Te,s(c({type:"item",title:"日常工作"},e),{projectType:3})))}var Oe="_loading_10a2l_1";function $e(e){const{visible:t,loading:r,children:a}=e;return t?a:r?d.createElement("div",{className:Oe},d.createElement(w,null)):""}var Be=p.exports.forwardRef((function(e,t){const{timeScope:r="",onChange:a}=e;return d.createElement("span",null,r)}));function qe(e,t){const r=e;for(const a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);return r}const ze={mode:"default"};var Le=qe((e=>{const t=ve(ze,e);return pe(t,d.createElement("div",{className:m("adm-list",`adm-list-${t.mode}`)},d.createElement("div",{className:"adm-list-inner"},t.children)))}),{Item:e=>{var t;const r=null!=(t=e.clickable)?t:!!e.onClick,a=void 0===e.arrow?r:e.arrow,n=d.createElement("div",{className:"adm-list-item-content adm-list-item-content-abc"},e.prefix&&d.createElement("div",{className:"adm-list-item-content-prefix"},e.prefix),d.createElement("div",{className:"adm-list-item-content-main"},e.title&&d.createElement("div",{className:"adm-list-item-title"},e.title),e.children,e.description&&d.createElement("div",{className:"adm-list-item-description"},e.description)),e.extra&&d.createElement("div",{className:"adm-list-item-content-extra"},e.extra),a&&d.createElement(d.Fragment,null,d.createElement("div",{className:"adm-list-item-content-arrow"},!0===a?d.createElement(C,null):a)));return pe(e,d.createElement(r?"a":"div",{className:m("adm-list-item",r?["adm-plain-anchor"]:[],e.disabled&&"adm-list-item-disabled"),onClick:e.disabled?void 0:e.onClick},n))}});function Ke(e,t,r){const a=function(e){const t=p.exports.useRef(e);return e&&(t.current=!0),!!t.current}(e);return!!t||(!!e||!!a&&!r)}const Ve=e=>{const{visible:t}=e,r=p.exports.useRef(null),a=Ke(t,e.forceRender,e.destroyOnClose),[{height:n},l]=I((()=>({from:{height:0}})));return D((()=>{if(!t)return;const e=r.current;e&&l.start({height:e.offsetHeight,immediate:!0})})),P((()=>{const e=r.current;e&&(t?l.start({height:e.offsetHeight}):(l.start({height:e.offsetHeight,immediate:!0}),l.start({height:0})))}),[t]),d.createElement(F.div,{className:"adm-collapse-panel-content",style:{height:n.to((e=>n.idle&&t?"auto":e))}},d.createElement("div",{className:"adm-collapse-panel-content-inner",ref:r},d.createElement(Le.Item,null,a&&e.children)))};var We=qe((e=>{var t;const r=[];d.Children.forEach(e.children,(e=>{if(!d.isValidElement(e))return;"string"==typeof e.key&&r.push(e)}));const[a,n]=ge(e.accordion?{value:void 0===e.activeKey?void 0:null===e.activeKey?[]:[e.activeKey],defaultValue:void 0===e.defaultActiveKey||null===e.defaultActiveKey?[]:[e.defaultActiveKey],onChange:t=>{var r,a;null==(a=e.onChange)||a.call(e,null!=(r=t[0])?r:null)}}:{value:e.activeKey,defaultValue:null!=(t=e.defaultActiveKey)?t:[],onChange:e.onChange}),l=null===a?[]:Array.isArray(a)?a:[a];return pe(e,d.createElement("div",{className:"adm-collapse"},d.createElement(Le,null,r.map((t=>{const r=t.key,a=l.includes(r);return d.createElement(d.Fragment,{key:r},pe(t.props,d.createElement(Le.Item,{className:m("adm-collapse-panel-header",{"adm-collapse-panel-header-disabled":t.props.disabled}),onClick:t.props.disabled?void 0:function(o){var c,s;e.accordion?n(a?[]:[r]):n(a?l.filter((e=>e!==r)):[...l,r]),null==(s=(c=t.props).onClick)||s.call(c,o)},arrow:d.createElement("div",{className:m("adm-collapse-arrow",{"adm-collapse-arrow-active":a})},d.createElement(C,null))},t.props.title)),d.createElement(Ve,{visible:a,forceRender:!!t.props.forceRender,destroyOnClose:!!t.props.destroyOnClose},t.props.children))})))))}),{Panel:()=>null});const He=()=>{const e=R(new Date,"yyyy-MM-dd"),t=d.useRef(),[r,a]=d.useState(0),[n,l]=p.exports.useState(),[o,c]=d.useState(e),[s,i]=p.exports.useState(!1),[m,u]=p.exports.useState([]),f=[{detpId:"10",deptCode:"001-00A",name:"我的部门"}];const h=d.useCallback((e=>{const t=m.findIndex(((t={})=>t.userDeptCode===e.deptCode));return-1!==t?[m[t],t]:[{items:[],projects:[],userDeptCode:e.deptCode},m.length]}),[m]);return d.createElement("div",{className:W},d.createElement("div",{className:H},d.createElement("div",{className:G},d.createElement("div",{className:X},d.createElement(Be,{ref:t,timeScope:o,onChange:e=>{c(e)}}),d.createElement("img",{className:J,src:"https://pub-med-post.medlinker.com/_/prod/developer-panel/1463517605938594832.png"})),d.createElement("span",{className:Q},d.createElement("span",null,"剩余可用精力："),d.createElement("span",{className:100-r<0?`${Z} ${U}`:U},100-r,"%"))),d.createElement($e,{visible:f.length,loading:!0},!!m.length&&1==+n&&o===R(new Date,"yyyy-MM-dd")&&d.createElement(S,{content:"今日还未提交日报",color:"alert",closeable:!0}),d.createElement(We,{className:Y,defaultActiveKey:Object.keys(f)},f.map(((e,t)=>{const[r,a]=h(e);return d.createElement(We.Panel,{key:`${t}`,title:e.name},d.createElement(Me,{onChange:e=>{m[a]=e,u([...m])},timeScope:o,deptCode:e.deptCode,item:r}))}))),d.createElement("div",{className:ee}),d.createElement(T,{position:"bottom"}))),d.createElement($e,{visible:f.length,laoding:!1},d.createElement("div",{className:te},d.createElement(M,{style:{"--icon-size":"18px","--font-size":"14px","--gap":"6px",margin:"0 0 20px 0",textAlign:"center",color:s?"#666666":"#999999"},checked:s,onChange:i},"开启一周自动提交日报"),d.createElement("div",{style:{display:"flex"}},d.createElement(O,{className:`${re} ${ae}`,block:!0,onClick:()=>{}},"日报记录"),d.createElement(O,{className:re,block:!0,onClick:function(){_.show({content:"提交成功",getContainer:()=>document.getElementById("report-container")})},style:2==+n&&o===e?{backgroundColor:"#00b578"}:{},disabled:r>100||2==+n&&o!==e},r<=100?"提交":"工作精力超过 100%")),d.createElement(T,{position:"bottom"}))),d.createElement("div",{id:"simulator-popup"}))};let Ge=0;const Xe=["#FF4646","#21A97A","#1874FF","#FFC214","#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"],Je=e=>{const t=d.useRef(),{dept:r,data:a,showGrid:n=!1,flipPage:l=!0,legendWidth:o,scale:c=1}=e,s="with-g2-"+Ge++;return d.useEffect((()=>{if(t.current){const e=t.current;e.changeData(a),e.filter("dept",(e=>e===r)),e.render()}}),[r,a]),d.useEffect((()=>{const e=new $({container:s,autoFit:!0,renderer:"svg",height:220*c});e.data(a),e.filter("dept",(e=>e===r)),e.axis("date",{label:{style:{fontSize:12*c},formatter:e=>e.substr(5)}}),e.axis("value",{label:{style:{fontSize:12*c}},grid:n?{line:{style:{stroke:"#1A3A73"}}}:null}),e.legend({flipPage:l,itemWidth:o,label:{style:{fontSize:20*c}},marker:(e,t)=>({symbol:"circle",style:{fill:Xe[t]}})}),e.tooltip({showCrosshairs:!0,title:(e,t)=>`${t.value}人日 (${t.percent}%)`}),e.line().position("date*value").color("type",Xe).shape("smooth"),t.current=e,e.render()}),[]),d.createElement("div",{id:s,className:"g2-chart-line-type",style:{width:"98%"}})};var Qe={code:0,errcode:0,message:"0",errmsg:"0",ttl:1,data:{costInfo:{loss:"6440",managerCost:"0",companyProjectCost:"35360",deptProjectCost:"9220",matterCost:"55120",total:"106140"},matterInfo:{list:[{title:"线上问题处理",cost:"4885"},{title:"工程技术需求",cost:"3935"},{title:"管理工作",cost:"2150"},{title:"质效平台",cost:"2120"},{title:"工程运维",cost:"1600"},{title:"绩效规则",cost:"335"}]}}};function Ue(){let e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPod","iPad"];for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!(!window.dd||"notInDingTalk"===dd.env.platform)}const Ye=e=>{const t=e,{fill:r="#fff",inline:a=!1,clickable:n=!1}=t,l=i(t,["fill","inline","clickable"]);return d.createElement(B,s(c({},l),{className:m("med-card",e.className,{"med-card-clickable":n,"med-card-mobile":Ue(),"med-card-inline":a}),style:c({backgroundColor:r},e.style)}))},Ze=function(e){var t=e,{color:r,customExtra:a}=t,n=i(t,["color","customExtra"]);const l=Number(n.progress);return d.createElement(Ye,s(c({},n),{bodyStyle:c({display:"flex"},n.bodyStyle),extra:a||d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement("div",{style:{width:84,marginRight:8}},d.createElement(q,{percent:l,style:{"--fill-color":r||"#1677ff"}})),d.createElement("span",{className:"card-title-progress-num"},`${l.toFixed(1)}%`))}))},et=(100*+Qe.data.costInfo.loss/+Qe.data.costInfo.total).toFixed(1),tt=()=>{const e=Qe.data.matterInfo.list,t=e.reduce(((e,t)=>e+ +t.cost),0),r=new Date,a=z(r),n="001-00A",l=[a,L(a,1),L(a,2),L(a,3),L(a,4)].reduce(((t,r)=>{const a=Array(e.length).fill(1).map((()=>100*Math.random())),l=a.reduce(((e,t)=>e+t),0);return t.push(...e.map(((e,t)=>{const o=a[t];return{value:+o.toFixed(1),dept:n,date:R(r,"yyyy-MM-dd"),type:e.title,percent:(100*o/l).toFixed(2)}}))),console.log("test: ",t),t}),[]);return d.createElement(d.Fragment,null,d.createElement(Ye,{className:"dashboard-top-chart"},d.createElement(Je,{data:l,dept:n})),d.createElement("div",{className:"dashboard-detail-cards"},Qe.data.matterInfo.list.map(((e,r)=>d.createElement(Ze,{title:e.title,progress:100*+e.cost/t,key:r}))),d.createElement(Ze,{title:"日常损耗",progress:et})))};d.PureComponent;const rt=e=>{const t=d.createRef();return d.useState(!1),d.useLayoutEffect((()=>{var e,r,a;null==(a=null==(r=null==(e=t.current)?void 0:e.contentWindow)?void 0:r.document)||a.body}),[]),d.createElement("div",{className:"home-page"},d.createElement(Ye,{title:"一分钟日报初体验",fill:"#f0f2f5"}),d.createElement("div",{className:"simulator-box",id:"report-container"},d.createElement(He,null)),d.createElement("div",{className:"dashboard-box"},d.createElement(tt,null)))},at=()=>(d.useEffect((()=>{!function(){function e(){window.innerWidth||document.body.clientWidth,document.querySelector("html").style.fontSize="48px"}e(),window.addEventListener("resize",(function(){e()}))}()}),[]),d.createElement(rt,null));V.render(d.createElement(at,null),document.getElementById("app"));
