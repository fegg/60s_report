var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,c=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&c(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&c(e,a,t[a]);return e},s=(e,r)=>t(e,a(r)),i=(e,t)=>{var a={};for(var c in e)l.call(e,c)&&t.indexOf(c)<0&&(a[c]=e[c]);if(null!=e&&r)for(var c of r(e))t.indexOf(c)<0&&n.call(e,c)&&(a[c]=e[c]);return a};import{R as d,c as m,r as u,u as p,a as f,b,i as v,d as h,T as g,l as E,e as y,P as C,S as k,C as N,f as _,g as I,A as j,D as x,L as w,h as P,j as S,k as R,m as F,n as A,Q as $,N as D,o as O,p as M,B,q as L,s as q,t as z,v as T,w as W}from"./vendor.171d5434.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var K="_page_15ceg_1",V="_wrapper_15ceg_7",H="_header_15ceg_10",U="_header-placeholder_15ceg_27",G="_timer_15ceg_30",X="_arrowRight_15ceg_40",Y="_question_15ceg_46",Q="_total_15ceg_59",J="_num_15ceg_66",Z="_collapse_15ceg_69",ee="_warning_15ceg_72",te="_placeholder_15ceg_75",ae="_footer_15ceg_80",re="_button_15ceg_90",le="_look_15ceg_98";var ne="_block_1beww_1",ce="_label_1beww_6";function oe(e){const{children:t,label:a,extra:r,style:l={},className:n=""}=e;return d.createElement("div",{className:`${ne} ${n}`},a&&d.createElement("div",{className:ce,style:l},d.createElement("span",null,a),r||""),"function"==typeof t?t(e):t)}const se=d.createContext({recentOptions:{},timeScope:"",total:0}),ie=d.createContext({works:[],projects:[],worksMap:{},projectsMap:{},getProjects:()=>{},searchParams:{projectName:""}});function de(e,t){const a=o({},t.props);e.className&&(a.className=m(t.props.className,e.className)),e.style&&(a.style=o(o({},a.style),e.style)),void 0!==e.tabIndex&&(a.tabIndex=e.tabIndex);for(const r in e)e.hasOwnProperty(r)&&(r.startsWith("data-")||r.startsWith("aria-"))&&(a[r]=e[r]);return d.cloneElement(t,a)}const me=({points:e,max:t,min:a,upperBound:r,lowerBound:l})=>{const n=t-a,c=e.map((e=>{const t={left:Math.abs(e-a)/n*100+"%"},c=m({"adm-slider-tick":!0,"adm-slider-tick-active":e<=r&&e>=l});return d.createElement("span",{className:c,style:t,key:e})}));return d.createElement("div",{className:"adm-slider-ticks"},c)},ue=({marks:e,upperBound:t,lowerBound:a,max:r,min:l})=>{const n=Object.keys(e),c=r-l,o=n.map(parseFloat).sort(((e,t)=>e-t)).filter((e=>e>=l&&e<=r)).map((r=>{const n=e[r];if(!n&&0!==n)return null;const o=m({"adm-slider-mark-text":!0,"adm-slider-mark-text-active":r<=t&&r>=a}),s={left:(r-l)/c*100+"%"};return d.createElement("span",{className:o,style:s,key:r},n)}));return d.createElement("div",{className:"adm-slider-mark"},o)},pe=e=>{const{value:t,min:a,max:r,disabled:l,onDrag:n}=e,c=u.exports.useRef(t),s=p((o=>{var s;if(l)return;o.first&&(c.current=t);const i=o.xy[0]-o.initial[0],d=null==(s=e.trackRef.current)?void 0:s.offsetWidth;if(!d)return;const m=i/Math.ceil(d)*(r-a);n(c.current+m,o.first,o.last)}),{axis:"x",pointer:{touch:!0}});return d.createElement("div",o({className:"adm-slider-thumb-container",style:{left:(t-a)/(r-a)*100+"%",right:"auto"}},s()),d.createElement("div",{className:"adm-slider-thumb"}),d.createElement("div",{className:"adm-slider-value"},+t,d.createElement("div",{className:"adm-slider-down"})))};function fe(...e){function t(e,t){return v(t)?e:t}let a=f({},e[0]);for(let r=1;r<e.length;r++)a=b(a,e[r],t);return a}function be(e){const{value:t,defaultValue:a,onChange:r}=e,l=h(),n=u.exports.useRef(void 0!==t?t:a);void 0!==t&&(n.current=t);const c=u.exports.useCallback((e=>{void 0===t&&(n.current=e,l()),null==r||r(e)}),[t,l,r]);return[n.current,c]}const ve={min:0,max:100,step:1,ticks:!1,range:!1,disabled:!1},he=e=>{var t;const a=fe(ve,e),{min:r,max:l,disabled:n,marks:c,ticks:o,step:s}=a;function i(e){return e.sort(((e,t)=>e-t))}function p(e){return a.range?e:e[1]}function f(e){var t;null==(t=a.onAfterChange)||t.call(a,p(e))}const[b,v]=be({value:a.value,defaultValue:null!=(t=a.defaultValue)?t:a.range?[r,r]:r,onChange:a.onChange}),h=i((g=b,a.range?g:[a.min,g]));var g;function E(e){const t=i(e),a=h;t[0]===a[0]&&t[1]===a[1]||v(p(t))}const y=u.exports.useRef(null),C=100*(h[1]-h[0])/(l-r)+"%",k=100*(h[0]-r)/(l-r)+"%",N=u.exports.useMemo((()=>{if(c)return Object.keys(c).map(parseFloat).sort(((e,t)=>e-t));{const e=[];for(let t=r;t<=l;t+=s)e.push(t);return e}}),[c,o,s,r,l]);function _(e){const t=e<r?r:e>l?l:e;let a=r;if(N.length)n=t,a=N.reduce(((e,t)=>Math.abs(e-n)<Math.abs(t-n)?e:t));else{const e=100/((l-r)/s);a=Math.round(t/e)*e*(l-r)*.01+r}var n;return a}const I=u.exports.useRef(0),j=e=>{if(I.current>0)return;if(e.stopPropagation(),n)return;const t=y.current;if(!t)return;const c=t.getBoundingClientRect().left,o=_((e.clientX-c)/Math.ceil(t.offsetWidth)*(l-r)+r);let s;s=a.range?Math.abs(o-h[0])>Math.abs(o-h[1])?[h[0],o]:[o,h[1]]:[a.min,o],E(s),f(s)},x=u.exports.useRef(),w=e=>d.createElement(pe,{key:e,value:h[e],min:r,max:l,disabled:n,trackRef:y,onDrag:(t,a,r)=>{a&&(I.current+=1,x.current=h);const l=_(t),n=x.current;if(!n)return;const c=[...n];c[e]=l,E(c),r&&(f(c),window.setTimeout((()=>{I.current-=1}),100))}});return de(a,d.createElement("div",{className:m("adm-slider",{"adm-slider-disabled":n})},d.createElement("div",{className:"adm-slider-track-container",onClick:j},d.createElement("div",{className:"adm-slider-track",onClick:j,ref:y},d.createElement("div",{className:"adm-slider-fill",style:{width:C,left:k}}),a.ticks&&d.createElement(me,{points:N,min:r,max:l,lowerBound:h[0],upperBound:h[1]}),a.range&&w(0),w(1))),c&&d.createElement(ue,{min:r,max:l,marks:c,lowerBound:h[0],upperBound:h[1]})))};var ge="_sliderWrapper_bmjh4_1";const Ee=Array.from({length:21},((e,t)=>5*t)).reduce(((e,t)=>(e[t]=0===t||100===t?t:"",e)),{});function ye({onChange:e,onAfterChange:t,value:a}){return d.createElement("div",{className:ge},d.createElement(he,{value:a,onChange:e,onAfterChange:t,marks:Ee}))}var Ce={ellipsis:"_ellipsis_1tt2b_1",unselect:"_unselect_1tt2b_7",projectPopup:"_projectPopup_1tt2b_14",projectHeader:"_projectHeader_1tt2b_20",projectPopupClose:"_projectPopupClose_1tt2b_30",projectSearch:"_projectSearch_1tt2b_39",checkList:"_checkList_1tt2b_40"};const ke={work_tree:"workItems",project_tree:"projectItems"};const Ne=e=>{d.useEffect((()=>{const e=document.querySelectorAll(".wrap-tree-select .adm-tree-select-column");2===e.length&&(e[0].style.width="40%",e[1].style.width="60%")}),[]);const{columns:t=2,cacheKey:a="work_tree"}=e,{recentOptions:r}=u.exports.useContext(se),l=e.options.map((e=>{const t={label:e.label,value:e.value};if(e.children.length){let a=function(e){return"string"==typeof e?d.createElement("span",{dangerouslySetInnerHTML:{__html:e}}):e};return s(o({},t),{children:e.children.map((e=>({label:a(e.label),value:e.value})))})}return+e.value<0?t:s(o({},t),{children:[s(o({},t),{value:`|${t.value}`})]})})),n={label:"最近选择",value:"-1",children:r[ke[a]]};l.unshift(n);const c=e.defaultValue;return e.options.map((e=>e.value)).includes(c[1])?(c[0]=c[1],c[1]=`|${c[1]}`):c[1]&&(c[0]=function(e,t){const a=e.find((e=>e.children.map((e=>e.value)).includes(t)));return null==a?void 0:a.value}(e.options,c[1])),u.exports.useEffect((()=>{var e;null==(e=document.querySelector(".adm-tree-select-item-active"))||e.scrollIntoView()}),[c]),d.createElement(g,{options:l,defaultValue:c,className:"wrap-tree-select",onChange:(a,r)=>{if(a.length===t){const[,t]=r.options;t.value=t.value.replace(/\||~|!/,""),e.onChange([a[0],t.value])}}})};function _e(e){const{projects:t,projectsMap:a,getProjects:r,searchParams:l}=u.exports.useContext(ie),{timeScope:n}=u.exports.useContext(se),[c,m]=u.exports.useState(!1),[p,f]=u.exports.useState([]),{data:b={},onChange:v}=e,h=E.exports.debounce(r,800),g=u.exports.useCallback((e=>{let t={page:1,pageSize:999,searchDate:n};e&&(t.projectName=e),h(t)}),[h,n]);return u.exports.useEffect((()=>{var e;let r=[...t],n=[],c=[];function m(e){return"string"==typeof e?d.createElement("span",{dangerouslySetInnerHTML:{__html:e}}):e}Object.values(a).forEach((e=>{const t=e,{children:a=[]}=t,r=i(t,["children"]);1==+e.projectRankType&&n.push(s(o({},r),{value:`~${r.value}`})),2==+e.projectRankType&&c.push(s(o({},r),{value:`~${r.value}`}))})),r=r.map((e=>{const t=m(e.label);if(e.children.length){e.children=e.children.map((e=>{const t=m(e.label);return s(o({},e),{label:t})}));return s(o({},e),{label:t,value:`!${e.value}`,children:[s(o({},e),{children:[]}),...e.children]})}return s(o({},e),{label:t})})),l.projectName&&t.length&&(null==(e=document.querySelectorAll(".adm-tree-select-item")[3])||e.click()),f([{label:"公司级项目",value:"-2",children:n},{label:"部门级项目",value:"-3",children:c},...r])}),[t,a,l.projectName]),u.exports.useEffect((()=>{!b.projectId&&m(!0)}),[b]),d.createElement(d.Fragment,null,d.createElement("span",{className:Ce.ellipsis,onClick:()=>{m(!0)}},b.projectName||d.createElement("span",{className:Ce.unselect},"请选择"),d.createElement(y,null)),d.createElement(C,{visible:c,onMaskClick:()=>{m(!1)},className:Ce.projectPopup,bodyStyle:{borderRadius:"20px 20px 0 0"}},d.createElement("div",{className:Ce.projectHeader},"项目名称",d.createElement("img",{onClick:()=>m(!1),className:Ce.projectPopupClose,src:"https://pub-med-post.medlinker.com/_/prod/developer-panel/1462974496569823003.png"})),d.createElement(k,{onChange:g,style:{backgroundColor:"#ffffff",width:"100%",padding:"10px 20px"},placeholder:"请输入项目名称过滤",defaultValue:null==l?void 0:l.projectName}),d.createElement("div",{className:Ce.checkList,style:{height:"80vh"}},d.createElement(Ne,{cacheKey:"project_tree",options:null!=p?p:t,defaultValue:["-1",b.projectId],onChange:e=>{const t=a[e[1].replace("~","")];let r={projectType:t.projectType,projectName:t.label,projectId:t.value};t.costDeptCode&&(r.costDeptCode=t.costDeptCode),r.projectId!==b.projectId&&(r.remark=""),v(r),m(!1)}}))))}function Ie(e){const{data:t={},onChange:a}=e,[r,l]=u.exports.useState(!1),{works:n,worksMap:c}=u.exports.useContext(ie);let o=t.projectName||d.createElement("span",{className:Ce.unselect},"请选择");return u.exports.useEffect((()=>{!t.projectId&&l(!0)}),[t]),d.createElement(d.Fragment,null,d.createElement("span",{className:Ce.ellipsis,onClick:()=>{l(!0)}},o,d.createElement(y,null)),d.createElement(C,{visible:r,onMaskClick:()=>{l(!1)},className:Ce.projectPopup,bodyStyle:{borderRadius:"20px 20px 0 0"}},d.createElement("div",{className:Ce.projectHeader},"工作事项",d.createElement("img",{onClick:()=>l(!1),className:Ce.projectPopupClose,src:"https://pub-med-post.medlinker.com/_/prod/developer-panel/1462974496569823003.png"})),d.createElement("div",{className:Ce.checkList,style:{height:"80vh"}},d.createElement(Ne,{options:n,defaultValue:["-1",t.projectId],onChange:e=>{const r=c[e[1]];let n={projectName:r.projectName,projectId:r.projectId,isRequiredComment:+r.isRequiredComment,isForceNotice:+r.isForceNotice,notice:r.notice};r.costDeptCode&&(n.costDeptCode=r.costDeptCode),n.projectId!==t.projectId&&(n.remark=""),a(n),l(!1)}}))))}var je="_remark_1kzp3_1",xe="_title_1kzp3_1",we="_tip_1kzp3_1",Pe="_card_1kzp3_7",Se="_header_1kzp3_12",Re="_remove_1kzp3_20";function Fe(e){const{data:t={},onChange:a,onRemove:r,type:l}=e,{total:n}=u.exports.useContext(se);function c(e,r=!1){return n+(e-+t.cost)>100&&(e=100-n+ +t.cost,r&&I.show({content:"工作精力已达到100%"})),a({cost:e})}return d.createElement(d.Fragment,null,d.createElement("div",{className:Pe},d.createElement("div",{className:Se},"project"===l&&d.createElement(_e,o({},e)),"item"===l&&d.createElement(Ie,o({},e)),d.createElement("div",{className:Re,onClick:r},d.createElement(N,null))),d.createElement(ye,{onChange:e=>c(e),onAfterChange:e=>c(e,!0),value:t.cost}),d.createElement("div",{className:je},d.createElement("div",{className:xe},1===t.isRequiredComment&&d.createElement("span",null,"*"),"备注："),d.createElement(_,{value:t.remark,onChange:e=>a({remark:e}),placeholder:""+(1===t.isRequiredComment?"请输入备注":"（选填）"),rows:1,autoSize:{minRows:1,maxRows:5}})),1===t.isRequiredComment&&!t.remark&&d.createElement("div",{className:we},d.createElement("span",null,"*"),t.notice)))}function Ae(e){const{deptCode:t,item:a,onChange:r,projectType:l,title:n,type:c}=e;let s=[],i=[];return d.createElement(ie.Provider,{value:{getProjects:()=>{},projects:[],projectsMap:{},works:[],worksMap:{},searchParams:{}}},d.createElement(oe,{label:n,className:s.length?Ce.block:"",extra:d.createElement("div",{onClick:()=>{let e={time:+new Date,cost:0};if("item"===c){if(e.projectType=l,s[0]&&!s[0].projectId)return void I.show({content:"请先完善再新增"})}else if(s[0]&&!s[0].projectId)return void I.show({content:"请先完善再新增"});a[`${c}s`].unshift(e),r(a)}},d.createElement(j,{style:{color:"#1677ff"}}))},!!s.length&&s.map(((e,n)=>d.createElement(Fe,{type:c,key:`${c}_${n}_${e.projectId}_${e.time}_${a[`${c}Type`]}`,data:e,projectType:l,deptCode:t,onChange:d=>{const m=s.filter((e=>e.projectId===d.projectId));if(d.projectId&&m.length){if(d.projectId===e.projectId)return;return I.show({content:"当前工作已添加请勿重复添加"}),void console.log(e)}1===d.isForceNotice&&x.alert({content:d.notice||"请填写备注",closeOnMaskClick:!1}),e=o(o({costDeptCode:t},e),d),"item"===c&&(e.projectType=l),s[n]=e,a[`${c}s`]=[...s,...i],r(a)},onRemove:()=>{s.splice(n,1),a[`${c}s`]=[...s,...i],r(a)}})))))}function $e(e){return d.createElement("div",null,d.createElement(Ae,s(o({type:"item",title:"日常工作"},e),{projectType:3})))}var De="_loading_10a2l_1";function Oe(e){const{visible:t,loading:a,children:r}=e;return t?r:a?d.createElement("div",{className:De},d.createElement(w,null)):""}var Me=u.exports.forwardRef((function(e,t){const{timeScope:a="",onChange:r}=e;return d.createElement("span",null,a)}));function Be(e,t){const a=e;for(const r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);return a}const Le={mode:"default"};var qe=Be((e=>{const t=fe(Le,e);return de(t,d.createElement("div",{className:m("adm-list",`adm-list-${t.mode}`)},d.createElement("div",{className:"adm-list-inner"},t.children)))}),{Item:e=>{var t;const a=null!=(t=e.clickable)?t:!!e.onClick,r=void 0===e.arrow?a:e.arrow,l=d.createElement("div",{className:"adm-list-item-content adm-list-item-content-abc"},e.prefix&&d.createElement("div",{className:"adm-list-item-content-prefix"},e.prefix),d.createElement("div",{className:"adm-list-item-content-main"},e.title&&d.createElement("div",{className:"adm-list-item-title"},e.title),e.children,e.description&&d.createElement("div",{className:"adm-list-item-description"},e.description)),e.extra&&d.createElement("div",{className:"adm-list-item-content-extra"},e.extra),r&&d.createElement(d.Fragment,null,d.createElement("div",{className:"adm-list-item-content-arrow"},!0===r?d.createElement(y,null):r)));return de(e,d.createElement(a?"a":"div",{className:m("adm-list-item",a?["adm-plain-anchor"]:[],e.disabled&&"adm-list-item-disabled"),onClick:e.disabled?void 0:e.onClick},l))}});function ze(e,t,a){const r=function(e){const t=u.exports.useRef(e);return e&&(t.current=!0),!!t.current}(e);return!!t||(!!e||!!r&&!a)}const Te=e=>{const{visible:t}=e,a=u.exports.useRef(null),r=ze(t,e.forceRender,e.destroyOnClose),[{height:l},n]=P((()=>({from:{height:0}})));return S((()=>{if(!t)return;const e=a.current;e&&n.start({height:e.offsetHeight,immediate:!0})})),R((()=>{const e=a.current;e&&(t?n.start({height:e.offsetHeight}):(n.start({height:e.offsetHeight,immediate:!0}),n.start({height:0})))}),[t]),d.createElement(F.div,{className:"adm-collapse-panel-content",style:{height:l.to((e=>l.idle&&t?"auto":e))}},d.createElement("div",{className:"adm-collapse-panel-content-inner",ref:a},d.createElement(qe.Item,null,r&&e.children)))};var We=Be((e=>{var t;const a=[];d.Children.forEach(e.children,(e=>{if(!d.isValidElement(e))return;"string"==typeof e.key&&a.push(e)}));const[r,l]=be(e.accordion?{value:void 0===e.activeKey?void 0:null===e.activeKey?[]:[e.activeKey],defaultValue:void 0===e.defaultActiveKey||null===e.defaultActiveKey?[]:[e.defaultActiveKey],onChange:t=>{var a,r;null==(r=e.onChange)||r.call(e,null!=(a=t[0])?a:null)}}:{value:e.activeKey,defaultValue:null!=(t=e.defaultActiveKey)?t:[],onChange:e.onChange}),n=null===r?[]:Array.isArray(r)?r:[r];return de(e,d.createElement("div",{className:"adm-collapse"},d.createElement(qe,null,a.map((t=>{const a=t.key,r=n.includes(a);return d.createElement(d.Fragment,{key:a},de(t.props,d.createElement(qe.Item,{className:m("adm-collapse-panel-header",{"adm-collapse-panel-header-disabled":t.props.disabled}),onClick:t.props.disabled?void 0:function(c){var o,s;e.accordion?l(r?[]:[a]):l(r?n.filter((e=>e!==a)):[...n,a]),null==(s=(o=t.props).onClick)||s.call(o,c)},arrow:d.createElement("div",{className:m("adm-collapse-arrow",{"adm-collapse-arrow-active":r})},d.createElement(y,null))},t.props.title)),d.createElement(Te,{visible:r,forceRender:!!t.props.forceRender,destroyOnClose:!!t.props.destroyOnClose},t.props.children))})))))}),{Panel:()=>null});const Ke=()=>{const e=A(new Date,"yyyy-MM-dd"),t=d.useRef(),[a,r]=d.useState(0),[l,n]=u.exports.useState(),[c,o]=d.useState(e),[s,i]=u.exports.useState(!1),[m,p]=u.exports.useState([]),f=[{detpId:"10",deptCode:"001-00A",deptName:"部门1"}];const b=d.useCallback((e=>{const t=m.findIndex(((t={})=>t.userDeptCode===e.deptCode));return-1!==t?[m[t],t]:[{items:[],projects:[],userDeptCode:e.deptCode},m.length]}),[m]);return d.createElement("div",{className:K},d.createElement("div",{className:V},d.createElement("div",{className:H},d.createElement("div",{className:G},d.createElement(Me,{ref:t,timeScope:c,onChange:e=>{o(e)}}),d.createElement("img",{className:X,src:"https://pub-med-post.medlinker.com/_/prod/developer-panel/1463517605938594832.png"}),d.createElement("a",{href:"https://alidocs.dingtalk.com/i/team/dN0G7AR0kd777XWY/docs/dN0G783AqvNpazWY",className:Y},"填报说明",d.createElement($,null))),d.createElement("span",{className:Q},d.createElement("span",null,"剩余可用精力："),d.createElement("span",{className:100-a<0?`${ee} ${J}`:J},100-a,"%"))),d.createElement("div",{className:U}),d.createElement(Oe,{visible:f.length,loading:!0},!!m.length&&1==+l&&c===A(new Date,"yyyy-MM-dd")&&d.createElement(D,{content:"今日还未提交日报",color:"alert",closeable:!0}),d.createElement(We,{className:Z,defaultActiveKey:Object.keys(f)},f.map(((e,t)=>{const[a,r]=b(e);return d.createElement(We.Panel,{key:`${t}`,title:e.name},d.createElement($e,{onChange:e=>{m[r]=e,p([...m])},timeScope:c,deptCode:e.deptCode,item:a}))}))),d.createElement("div",{className:te}),d.createElement(O,{position:"bottom"}))),d.createElement(Oe,{visible:f.length,laoding:!1},d.createElement("div",{className:ae},d.createElement(M,{style:{"--icon-size":"18px","--font-size":"14px","--gap":"6px",margin:"0 0 20px 0",textAlign:"center",color:s?"#666666":"#999999"},checked:s,onChange:i},"开启一周自动提交日报"),d.createElement("div",{style:{display:"flex"}},d.createElement(B,{className:`${re} ${le}`,block:!0,onClick:()=>{}},"日报记录"),d.createElement(B,{className:re,block:!0,onClick:function(){},style:2==+l&&c===e?{backgroundColor:"#00b578"}:{},disabled:a>100||2==+l&&c!==e},a<=100?"提交":"工作精力超过 100%")),d.createElement(O,{position:"bottom"}))))};let Ve=0;const He=["#FF4646","#21A97A","#1874FF","#FFC214","#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"],Ue=e=>{const t=d.useRef(),{dept:a,data:r,showGrid:l=!1,flipPage:n=!0,legendWidth:c,scale:o=1}=e,s="with-g2-"+Ve++;return d.useEffect((()=>{if(t.current){const e=t.current;e.changeData(r),e.filter("dept",(e=>e===a)),e.render()}}),[a,r]),d.useEffect((()=>{const e=new L({container:s,autoFit:!0,renderer:"svg",height:220*o});e.data(r),e.filter("dept",(e=>e===a)),e.axis("date",{label:{style:{fontSize:12*o},formatter:e=>e.substr(5)}}),e.axis("value",{label:{style:{fontSize:12*o}},grid:l?{line:{style:{stroke:"#1A3A73"}}}:null}),e.legend({flipPage:n,itemWidth:c,label:{style:{fontSize:20*o}},marker:(e,t)=>({symbol:"circle",style:{fill:He[t]}})}),e.tooltip({showCrosshairs:!0,title:(e,t)=>`${t.value}人日 (${t.percent}%)`}),e.line().position("date*value").color("type",He).shape("smooth"),t.current=e,e.render()}),[]),d.createElement("div",{id:s,className:"g2-chart-line-type",style:{width:"98%"}})};var Ge={dayData:[{day:"2021-12-01",deptList:[{deptName:"风控监察中心",deptCode:"001-010",deptInfo:{costInfo:{loss:"400",managerCost:"0",companyProjectCost:"0",deptProjectCost:"0",matterCost:"100",total:"500"},companyProjectInfo:{list:[]},deptProjectInfo:{list:[]},matterInfo:{list:[{title:"风控工作",cost:"100",user:[{userId:"9209c7526ca541948a24d548eb53ae1f",name:"张宇",cost:"100"}]}]},managerInfo:{list:[]},lostInfo:{user:[{userId:"0a855b8a5c0c416fb1a597979c4b4186",name:"周靖",cost:"100"},{userId:"20db6f5ee6074971924ad819a22d4105",name:"姜坤",cost:"100"},{userId:"3c484bf3542b468daebf9da73c90cbbf",name:"牛砚辉",cost:"100"},{userId:"dc72cb954ae94e4ea9ff36b1ff1f2562",name:"王滨滨",cost:"100"}],leaveUser:[]},deptInfo:[]}}]},{day:"2021-12-02",deptList:[{deptName:"风控监察中心",deptCode:"001-010",deptInfo:{costInfo:{loss:"145",managerCost:"0",companyProjectCost:"0",deptProjectCost:"0",matterCost:"355",total:"500"},companyProjectInfo:{list:[]},deptProjectInfo:{list:[]},matterInfo:{list:[{title:"风控工作",cost:"255",user:[{userId:"20db6f5ee6074971924ad819a22d4105",name:"姜坤",cost:"100"},{userId:"9209c7526ca541948a24d548eb53ae1f",name:"张宇",cost:"100"},{userId:"dc72cb954ae94e4ea9ff36b1ff1f2562",name:"王滨滨",cost:"30"},{userId:"0a855b8a5c0c416fb1a597979c4b4186",name:"周靖",cost:"25"}]},{title:"其他",cost:"100",user:[{userId:"3c484bf3542b468daebf9da73c90cbbf",name:"牛砚辉",cost:"100"}]}]},managerInfo:{list:[]},lostInfo:{user:[{userId:"0a855b8a5c0c416fb1a597979c4b4186",name:"周靖",cost:"75"},{userId:"dc72cb954ae94e4ea9ff36b1ff1f2562",name:"王滨滨",cost:"70"}],leaveUser:[]},deptInfo:[]}}]},{day:"2021-12-03",deptList:[{deptName:"风控监察中心",deptCode:"001-010",deptInfo:{costInfo:{loss:"5",managerCost:"0",companyProjectCost:"0",deptProjectCost:"0",matterCost:"495",total:"500"},companyProjectInfo:{list:[]},deptProjectInfo:{list:[]},matterInfo:{list:[{title:"风控工作",cost:"395",user:[{userId:"9209c7526ca541948a24d548eb53ae1f",name:"张宇",cost:"100"},{userId:"dc72cb954ae94e4ea9ff36b1ff1f2562",name:"王滨滨",cost:"100"},{userId:"20db6f5ee6074971924ad819a22d4105",name:"姜坤",cost:"100"},{userId:"0a855b8a5c0c416fb1a597979c4b4186",name:"周靖",cost:"95"}]},{title:"其他",cost:"100",user:[{userId:"3c484bf3542b468daebf9da73c90cbbf",name:"牛砚辉",cost:"100"}]}]},managerInfo:{list:[]},lostInfo:{user:[{userId:"0a855b8a5c0c416fb1a597979c4b4186",name:"周靖",cost:"5"}],leaveUser:[]},deptInfo:[]}}]}]};const Xe=(e,t=1)=>{if(isNaN(e)||e===1/0)return 0;const a=/0.0*[^0]/;if(e>0&&e<.1){const t=e.toString().match(a);if(t)return Number(t[0])}return Number(e.toFixed(t))};function Ye(){let e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPod","iPad"];for(let a=0;a<t.length;a++)if(e.indexOf(t[a])>=0)return!0;return!(!window.dd||"notInDingTalk"===dd.env.platform)}const Qe="rgba(254, 141, 111, 40%)",Je=e=>{const t=e,{fill:a="#fff",inline:r=!1,clickable:l=!1}=t,n=i(t,["fill","inline","clickable"]);return d.createElement(q,s(o({},n),{className:m("med-card",e.className,{"med-card-clickable":l,"med-card-mobile":Ye(),"med-card-inline":r}),style:o({backgroundColor:a},e.style)}))},Ze=function(e){var t=e,{color:a,customExtra:r}=t,l=i(t,["color","customExtra"]);const n=Number(l.progress);return d.createElement(Je,s(o({},l),{bodyStyle:o({display:"flex"},l.bodyStyle),extra:r||d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement("div",{style:{width:84,marginRight:8}},d.createElement(z,{percent:n,style:{"--fill-color":a||"#1677ff"}})),d.createElement("span",null,`${n}%`))}))},et=function(e){const t=e,{title:a,className:r,clickable:l,fill:n=Qe}=t,c=i(t,["title","className","clickable","fill"]);return d.createElement(Je,o({className:m("card-statics-main",{"med-card-clickable":l},r),inline:!0,fill:n},c),d.createElement("p",{className:"card-statics-title"},a),d.createElement("h4",{className:"card-statics-quota"},e.quota),d.createElement("div",{className:"card-statics-desc"},e.desc))},tt=[{value:"4",label:"S"},{value:"3",label:"A"},{value:"2",label:"B"},{value:"1",label:"C"}];let at=["magenta","orange","blue",null];tt.reduce(((e,t,a)=>(e[t.value]={label:t.label,color:at[a]},e)),{});const rt=[{value:"1",label:"公司级别"},{value:"2",label:"部门级别"}];rt.reduce(((e,t)=>(e[t.value]=t.label,e)),{});const lt=["rgba(254, 141, 111, 40%)","rgba(255, 157, 30, 15%)","rgba(155, 219, 197, 40%)","rgba(30, 116, 255, 15%)","rgba(246, 215, 195, 48%)","rgba(221, 221, 221, 29%)","rgb(157, 223, 211)"];rt.reduce(((e,t)=>(e[t.value]=t.label,e)),{}),tt.reduce(((e,t)=>(e[t.value]=t.label,e)),{});[{label:"竞标报名中",color:"purple",value:"1"},{label:"竞标评分中",color:"orange",value:"2"},{label:"竞标完成",color:"success",value:"3"}].reduce(((e,t)=>(e[t.value]=t,e)),{});[{label:"未设立验收标准",color:"red",value:"-3"},{label:"验收标准确立中",color:"orange",value:"-2"},{label:"验收标准已确立",color:"success",value:"-1"},{label:"部分验收已审核",color:"green",value:"1"},{label:"项目考核结束",color:"#87d068",value:"2"}].reduce(((e,t)=>(e[t.value]=t,e)),{});const nt={minWidth:"216px",minHeight:"73px",backgroundColor:"#f1f1f1",borderRadius:"10px",color:"#2a2a2a",cursor:"pointer"},ct=[["companyProject","公司项目"],["deptProject","部门项目"],["matter","日常事项"],["manager","管理事项"]].map((([e])=>e)),ot=(e,t,a)=>r=>{const{title:l,factor:n}=r,{list:c,cost:i,total:m,ratio:u}=function(e,t){const a=t[`${e}Info`].list,r=Number(t.costInfo.total),l=Number(t.costInfo[`${e}Cost`]),n=Boolean(l)?Xe(l/r*100):0;return{list:a,cost:l,total:r,ratio:n}}(n,e),{data:p,topRatio:f=0,more:b}=st(c,i,m),v=r.fill||lt[ct.indexOf(n)];function h(e){return d.createElement(et,{title:e.title,key:l,quota:e.ratio,desc:e.desc,clickable:!!e.clickable,onClick:()=>{null==a||a.itemClick(e,e.index,n)},fill:v})}const g=p.map(((e,t)=>d.createElement(h,s(o({},e),{key:e.title,index:t,clickable:!0}))));return g.length>0?d.createElement(Ze,{title:l,progress:u,bodyStyle:{display:"flex"}},g,function(){if(b){const e=Xe(100-f),a=Xe(e*i/m);return d.createElement(d.Fragment,null,d.createElement(h,{title:"其余总计",ratio:`${a}%`,desc:"",clickable:!1}),d.createElement(Je,{style:nt,onClick:()=>t({list:c,total:m,title:l}),key:"more"},"查看所有"))}return null}()):d.createElement(Ze,{title:l,progress:u,bodyStyle:{display:"flex"}})},st=function(e,t,a){let r=0;const l=e.slice(0,3).reduce((function(e,l){const n=Xe(l.cost/t*100),c=Xe(l.cost/a*100);return r+=1*Number(n),[...e,{title:l.title,ratio:c+"%",desc:""}]}),[]);return{topRatio:Xe(r),data:l,more:e.length>3}};var it={costInfo:{loss:"550",managerCost:"0",companyProjectCost:"0",deptProjectCost:"0",matterCost:"1250",total:"1800"},companyProjectInfo:{list:[]},deptProjectInfo:{list:[]},matterInfo:{list:[{title:"风控工作",cost:"885",user:[{userId:"9209c7526ca541948a24d548eb53ae1f",name:"张宇",cost:"400"},{userId:"20db6f5ee6074971924ad819a22d4105",name:"姜坤",cost:"235"},{userId:"dc72cb954ae94e4ea9ff36b1ff1f2562",name:"王滨滨",cost:"130"},{userId:"0a855b8a5c0c416fb1a597979c4b4186",name:"周靖",cost:"120"}]},{title:"其他",cost:"265",user:[{userId:"3c484bf3542b468daebf9da73c90cbbf",name:"牛砚辉",cost:"200"},{userId:"20db6f5ee6074971924ad819a22d4105",name:"姜坤",cost:"65"}]},{title:"会议",cost:"100",user:[{userId:"3c484bf3542b468daebf9da73c90cbbf",name:"牛砚辉",cost:"100"}]}]},managerInfo:{list:[]},lostInfo:{user:[{userId:"0a855b8a5c0c416fb1a597979c4b4186",name:"周靖",cost:"180"},{userId:"dc72cb954ae94e4ea9ff36b1ff1f2562",name:"王滨滨",cost:"170"},{userId:"20db6f5ee6074971924ad819a22d4105",name:"姜坤",cost:"100"},{userId:"3c484bf3542b468daebf9da73c90cbbf",name:"牛砚辉",cost:"100"}],leaveUser:[]},deptInfo:[]};const dt=(100*+it.costInfo.loss/+it.costInfo.total).toFixed(1),mt=()=>{const e=ot(it,(()=>{}));return d.createElement(d.Fragment,null,d.createElement(Je,{className:"dashboard-top-chart"},d.createElement(Ue,{data:(t=Ge.dayData,t.reduce(((e,t)=>{const r=[];return t.deptList.forEach((e=>{const l=e.deptInfo.costInfo,n=e=>+(+l[e]/+l.total*100).toFixed(2);r.push({value:+l.companyProjectCost/100,dept:e.deptCode||a,date:t.day,type:"公司项目",percent:n("companyProjectCost")},{value:+l.deptProjectCost/100,dept:e.deptCode||a,date:t.day,type:"部门项目",percent:n("deptProjectCost")},{value:+l.matterCost/100,dept:e.deptCode||a,date:t.day,type:"日常事项",percent:n("matterCost")},{value:+l.loss/100,dept:e.deptCode||a,date:t.day,type:"损耗",percent:n("loss")})})),[...e,...r]}),[])),dept:"001-010"})),d.createElement("div",{className:"dashboard-detail-cards"},d.createElement(e,o({},{title:"日常事项",factor:"matter"})),d.createElement(Ze,{title:"日常损耗",progress:dt})));var t,a};d.PureComponent;const ut=e=>{const t=d.createRef();return d.useState(!1),d.useLayoutEffect((()=>{var e,a,r;null==(r=null==(a=null==(e=t.current)?void 0:e.contentWindow)?void 0:a.document)||r.body}),[]),d.createElement("div",{className:"home-page"},d.createElement(Je,{title:"一分钟日报初体验",fill:"#f0f2f5"}),d.createElement("div",{className:"simulator-box"},d.createElement(Ke,null)),d.createElement("div",{className:"dashboard-box"},d.createElement(mt,null)))},pt=()=>(d.useEffect((()=>{!function(){function e(){let e=window.innerWidth||document.body.clientWidth;e>750&&(e=750);const t=e/15;document.querySelector("html").style.fontSize=`${t}px`}e(),window.addEventListener("resize",(function(){e()}))}()}),[]),d.createElement(ut,null));W.render(d.createElement(pt,null),document.getElementById("app"));
